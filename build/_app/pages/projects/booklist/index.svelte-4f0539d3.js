var re=Object.defineProperty,ue=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var W=(o,t,e)=>t in o?re(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,Y=(o,t)=>{for(var e in t||(t={}))he.call(t,e)&&W(o,e,t[e]);if(T)for(var e of T(t))_e.call(t,e)&&W(o,e,t[e]);return o},Z=(o,t)=>ue(o,fe(t));import{S as x,i as ee,s as te,e as _,t as w,j as N,c as d,a as p,g as I,d as u,l as U,b as m,G as A,f as V,H as f,I as q,h as se,V as j,a1 as de,a2 as le,a3 as pe,a4 as ve,n as F,o as ae,p as P,a5 as ke,a6 as me,u as be,m as oe,X as ge,k as ne,v as ye,w as Ee,x as $e,A as De,a7 as we,a8 as Ie}from"../../../chunks/vendor-f0c1caf4.js";import{d as G,a as Ve}from"../../../chunks/client-0607ff23.js";import{g as je}from"../../../chunks/navigation-c71191e7.js";import"../../../chunks/singletons-a42a5e91.js";function Be(o){let t,e,s,n=o[0].title+"",i,r,a,l,c=o[0].author+"",h,y,b,E,D,R,C,$,g,H,L,X;return{c(){t=_("li"),e=_("div"),s=_("h3"),i=w(n),r=N(),a=_("p"),l=w("By "),h=w(c),y=N(),b=_("div"),E=_("div"),D=_("span"),R=w("delete"),C=N(),$=_("div"),g=_("span"),H=w("favorite"),this.h()},l(k){t=d(k,"LI",{class:!0});var v=p(t);e=d(v,"DIV",{class:!0});var B=p(e);s=d(B,"H3",{class:!0});var z=p(s);i=I(z,n),z.forEach(u),r=U(B),a=d(B,"P",{});var M=p(a);l=I(M,"By "),h=I(M,c),M.forEach(u),B.forEach(u),y=U(v),b=d(v,"DIV",{class:!0});var S=p(b);E=d(S,"DIV",{class:!0});var J=p(E);D=d(J,"SPAN",{class:!0});var K=p(D);R=I(K,"delete"),K.forEach(u),J.forEach(u),C=U(S),$=d(S,"DIV",{class:!0});var O=p($);g=d(O,"SPAN",{class:!0});var Q=p(g);H=I(Q,"favorite"),Q.forEach(u),O.forEach(u),S.forEach(u),v.forEach(u),this.h()},h(){m(s,"class","svelte-1bp5s73"),A(s,"picked",o[1]),m(e,"class","details svelte-1bp5s73"),m(D,"class","material-icons"),m(E,"class","icon svelte-1bp5s73"),m(g,"class","material-icons svelte-1bp5s73"),A(g,"selected",o[0].isFav),m($,"class","icon svelte-1bp5s73"),m(b,"class","icons svelte-1bp5s73"),m(t,"class","svelte-1bp5s73")},m(k,v){V(k,t,v),f(t,e),f(e,s),f(s,i),f(e,r),f(e,a),f(a,l),f(a,h),f(t,y),f(t,b),f(b,E),f(E,D),f(D,R),f(b,C),f(b,$),f($,g),f(g,H),L||(X=[q(s,"click",o[4]),q(E,"click",o[5]),q($,"click",o[6])],L=!0)},p(k,[v]){v&1&&n!==(n=k[0].title+"")&&se(i,n),v&2&&A(s,"picked",k[1]),v&1&&c!==(c=k[0].author+"")&&se(h,c),v&1&&A(g,"selected",k[0].isFav)},i:j,o:j,d(k){k&&u(t),L=!1,de(X)}}}function Se(o,t,e){let{book:s}=t,n=!1;const i=async h=>{let y=le(G,"books",h.id);await pe(y)},r=async h=>{let y=le(G,"books",h.id);await ve(y,{isFav:!h.isFav})},a=()=>e(1,n=!n),l=()=>i(s),c=()=>r(s);return o.$$set=h=>{"book"in h&&e(0,s=h.book)},[s,n,i,r,a,l,c]}class Ae extends x{constructor(t){super();ee(this,t,Se,Be,te,{book:0})}}function ie(o,t,e){const s=o.slice();return s[4]=t[e],s}function Fe(o){let t,e;return{c(){t=_("p"),e=w("...waiting")},l(s){t=d(s,"P",{});var n=p(t);e=I(n,"...waiting"),n.forEach(u)},m(s,n){V(s,t,n),f(t,e)},p:j,i:j,o:j,d(s){s&&u(t)}}}function Pe(o){let t,e=[],s=new Map,n,i=o[1];const r=a=>a[4].id;for(let a=0;a<i.length;a+=1){let l=ie(o,i,a),c=r(l);s.set(c,e[a]=ce(c,l))}return{c(){t=_("ul");for(let a=0;a<e.length;a+=1)e[a].c();this.h()},l(a){t=d(a,"UL",{class:!0});var l=p(t);for(let c=0;c<e.length;c+=1)e[c].l(l);l.forEach(u),this.h()},h(){m(t,"class","svelte-5luldh")},m(a,l){V(a,t,l);for(let c=0;c<e.length;c+=1)e[c].m(t,null);n=!0},p(a,l){l&2&&(i=a[1],oe(),e=we(e,l,r,1,a,i,s,t,Ie,ce,null,ie),ae())},i(a){if(!n){for(let l=0;l<i.length;l+=1)P(e[l]);n=!0}},o(a){for(let l=0;l<e.length;l+=1)F(e[l]);n=!1},d(a){a&&u(t);for(let l=0;l<e.length;l+=1)e[l].d()}}}function ce(o,t){let e,s,n;return s=new Ae({props:{book:t[4]}}),{key:o,first:null,c(){e=ne(),ye(s.$$.fragment),this.h()},l(i){e=ne(),Ee(s.$$.fragment,i),this.h()},h(){this.first=e},m(i,r){V(i,e,r),$e(s,i,r),n=!0},p(i,r){t=i;const a={};r&2&&(a.book=t[4]),s.$set(a)},i(i){n||(P(s.$$.fragment,i),n=!0)},o(i){F(s.$$.fragment,i),n=!1},d(i){i&&u(e),De(s,i)}}}function Re(o){let t,e,s,n;const i=[Pe,Fe],r=[];function a(l,c){return l[0]&&l[1].length?0:1}return e=a(o),s=r[e]=i[e](o),{c(){t=_("div"),s.c(),this.h()},l(l){t=d(l,"DIV",{class:!0});var c=p(t);s.l(c),c.forEach(u),this.h()},h(){m(t,"class","home")},m(l,c){V(l,t,c),r[e].m(t,null),n=!0},p(l,[c]){let h=e;e=a(l),e===h?r[e].p(l,c):(oe(),F(r[h],1,1,()=>{r[h]=null}),ae(),s=r[e],s?s.p(l,c):(s=r[e]=i[e](l),s.c()),P(s,1),s.m(t,null))},i(l){n||(P(s),n=!0)},o(l){F(s),n=!1},d(l){l&&u(t),r[e].d()}}}function Ce(o,t,e){let s=!1,n=[],i=ke(G,"books");const r=me(i,a=>{let l=[];return a.docs.forEach(c=>{l.push(Z(Y({},c.data()),{id:c.id}))}),e(1,n=l),()=>r()});return be(()=>{const a=ge(Ve,l=>(l?e(0,s=!0):je("/projects/booklist/login"),()=>a))}),[s,n]}class qe extends x{constructor(t){super();ee(this,t,Ce,Re,te,{})}}export{qe as default};
