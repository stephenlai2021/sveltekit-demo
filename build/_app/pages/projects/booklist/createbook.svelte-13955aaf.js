import{S as O,i as R,s as V,e as h,t as g,j as y,c as k,a as b,g as B,d as _,l as w,b as v,f as S,H as s,W as A,I as q,a9 as z,V as E,a1 as D,a5 as G,aa as J,k as W,n as x,o as K,p as I,u as Q,m as Y,X as Z,v as tt,w as et,x as ot,A as at}from"../../../chunks/vendor-f0c1caf4.js";import{d as nt,a as rt}from"../../../chunks/client-0607ff23.js";import{g as X}from"../../../chunks/navigation-c71191e7.js";import"../../../chunks/singletons-a42a5e91.js";function st(l){let t,o,e,n,i,u,m,a,d,c,j,N,f,T,$,C,L,P;return{c(){t=h("form"),o=h("h3"),e=g("Add a New Book"),n=y(),i=h("label"),u=g("Book title:"),m=y(),a=h("input"),d=y(),c=h("label"),j=g("Book author:"),N=y(),f=h("input"),T=y(),$=h("button"),C=g("Add Book"),this.h()},l(p){t=k(p,"FORM",{});var r=b(t);o=k(r,"H3",{});var U=b(o);e=B(U,"Add a New Book"),U.forEach(_),n=w(r),i=k(r,"LABEL",{for:!0});var F=b(i);u=B(F,"Book title:"),F.forEach(_),m=w(r),a=k(r,"INPUT",{type:!0,name:!0}),d=w(r),c=k(r,"LABEL",{for:!0});var H=b(c);j=B(H,"Book author:"),H.forEach(_),N=w(r),f=k(r,"INPUT",{type:!0,name:!0}),T=w(r),$=k(r,"BUTTON",{});var M=b($);C=B(M,"Add Book"),M.forEach(_),r.forEach(_),this.h()},h(){v(i,"for","title"),v(a,"type","text"),v(a,"name","title"),a.required=!0,v(c,"for","author"),v(f,"type","text"),v(f,"name","author"),f.required=!0},m(p,r){S(p,t,r),s(t,o),s(o,e),s(t,n),s(t,i),s(i,u),s(t,m),s(t,a),A(a,l[0]),s(t,d),s(t,c),s(c,j),s(t,N),s(t,f),A(f,l[1]),s(t,T),s(t,$),s($,C),L||(P=[q(a,"input",l[3]),q(f,"input",l[4]),q(t,"submit",z(l[2]))],L=!0)},p(p,[r]){r&1&&a.value!==p[0]&&A(a,p[0]),r&2&&f.value!==p[1]&&A(f,p[1])},i:E,o:E,d(p){p&&_(t),L=!1,D(P)}}}function lt(l,t,o){let e="",n="";const i=async()=>{let a=G(nt,"books");await J(a,{title:e,author:n}),X("/projects/booklist")};function u(){e=this.value,o(0,e)}function m(){n=this.value,o(1,n)}return[e,n,i,u,m]}class it extends O{constructor(t){super();R(this,t,lt,st,V,{})}}function ut(l){let t,o;return{c(){t=h("p"),o=g("...waiting")},l(e){t=k(e,"P",{});var n=b(t);o=B(n,"...waiting"),n.forEach(_)},m(e,n){S(e,t,n),s(t,o)},i:E,o:E,d(e){e&&_(t)}}}function ct(l){let t,o;return t=new it({}),{c(){tt(t.$$.fragment)},l(e){et(t.$$.fragment,e)},m(e,n){ot(t,e,n),o=!0},i(e){o||(I(t.$$.fragment,e),o=!0)},o(e){x(t.$$.fragment,e),o=!1},d(e){at(t,e)}}}function ft(l){let t,o,e,n;const i=[ct,ut],u=[];function m(a,d){return a[0]?0:1}return t=m(l),o=u[t]=i[t](l),{c(){o.c(),e=W()},l(a){o.l(a),e=W()},m(a,d){u[t].m(a,d),S(a,e,d),n=!0},p(a,[d]){let c=t;t=m(a),t!==c&&(Y(),x(u[c],1,1,()=>{u[c]=null}),K(),o=u[t],o||(o=u[t]=i[t](a),o.c()),I(o,1),o.m(e.parentNode,e))},i(a){n||(I(o),n=!0)},o(a){x(o),n=!1},d(a){u[t].d(a),a&&_(e)}}}function pt(l,t,o){let e=!1;return Q(()=>{const n=Z(rt,i=>(i?o(0,e=!0):X("/projects/booklist/login"),()=>n))}),[e]}class kt extends O{constructor(t){super();R(this,t,pt,ft,V,{})}}export{kt as default};
